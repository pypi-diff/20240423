# Comparing `tmp/spiceai-0.2.1.tar.gz` & `tmp/spiceai-0.2.2.tar.gz`

## Comparing `spiceai-0.2.1.tar` & `spiceai-0.2.2.tar`

### file list

```diff
@@ -1,16 +1,17 @@
--rw-r--r--   0        0        0      614 2020-02-02 00:00:00.000000 spiceai-0.2.1/.github/workflows/ruff.yml
--rw-r--r--   0        0        0       55 2020-02-02 00:00:00.000000 spiceai-0.2.1/scripts/prompt.txt
--rw-r--r--   0        0        0     6011 2020-02-02 00:00:00.000000 spiceai-0.2.1/scripts/run.py
--rw-r--r--   0        0        0      177 2020-02-02 00:00:00.000000 spiceai-0.2.1/spice/__init__.py
--rw-r--r--   0        0        0      632 2020-02-02 00:00:00.000000 spiceai-0.2.1/spice/errors.py
--rw-r--r--   0        0        0     6508 2020-02-02 00:00:00.000000 spiceai-0.2.1/spice/models.py
--rw-r--r--   0        0        0     2154 2020-02-02 00:00:00.000000 spiceai-0.2.1/spice/providers.py
--rw-r--r--   0        0        0    28411 2020-02-02 00:00:00.000000 spiceai-0.2.1/spice/spice.py
--rw-r--r--   0        0        0     7622 2020-02-02 00:00:00.000000 spiceai-0.2.1/spice/spice_message.py
--rw-r--r--   0        0        0      842 2020-02-02 00:00:00.000000 spiceai-0.2.1/spice/utils.py
--rw-r--r--   0        0        0    18407 2020-02-02 00:00:00.000000 spiceai-0.2.1/spice/wrapped_clients.py
--rw-r--r--   0        0        0       23 2020-02-02 00:00:00.000000 spiceai-0.2.1/.gitignore
--rw-r--r--   0        0        0    11357 2020-02-02 00:00:00.000000 spiceai-0.2.1/LICENSE
--rw-r--r--   0        0        0     5903 2020-02-02 00:00:00.000000 spiceai-0.2.1/README.md
--rw-r--r--   0        0        0      538 2020-02-02 00:00:00.000000 spiceai-0.2.1/pyproject.toml
--rw-r--r--   0        0        0     6361 2020-02-02 00:00:00.000000 spiceai-0.2.1/PKG-INFO
+-rw-r--r--   0        0        0      614 2020-02-02 00:00:00.000000 spiceai-0.2.2/.github/workflows/ruff.yml
+-rw-r--r--   0        0        0      138 2020-02-02 00:00:00.000000 spiceai-0.2.2/scripts/mytoml.toml
+-rw-r--r--   0        0        0       55 2020-02-02 00:00:00.000000 spiceai-0.2.2/scripts/prompt.txt
+-rw-r--r--   0        0        0     6011 2020-02-02 00:00:00.000000 spiceai-0.2.2/scripts/run.py
+-rw-r--r--   0        0        0      177 2020-02-02 00:00:00.000000 spiceai-0.2.2/spice/__init__.py
+-rw-r--r--   0        0        0      632 2020-02-02 00:00:00.000000 spiceai-0.2.2/spice/errors.py
+-rw-r--r--   0        0        0     6508 2020-02-02 00:00:00.000000 spiceai-0.2.2/spice/models.py
+-rw-r--r--   0        0        0     2154 2020-02-02 00:00:00.000000 spiceai-0.2.2/spice/providers.py
+-rw-r--r--   0        0        0    30497 2020-02-02 00:00:00.000000 spiceai-0.2.2/spice/spice.py
+-rw-r--r--   0        0        0     7622 2020-02-02 00:00:00.000000 spiceai-0.2.2/spice/spice_message.py
+-rw-r--r--   0        0        0      842 2020-02-02 00:00:00.000000 spiceai-0.2.2/spice/utils.py
+-rw-r--r--   0        0        0    18407 2020-02-02 00:00:00.000000 spiceai-0.2.2/spice/wrapped_clients.py
+-rw-r--r--   0        0        0       23 2020-02-02 00:00:00.000000 spiceai-0.2.2/.gitignore
+-rw-r--r--   0        0        0    11357 2020-02-02 00:00:00.000000 spiceai-0.2.2/LICENSE
+-rw-r--r--   0        0        0     5903 2020-02-02 00:00:00.000000 spiceai-0.2.2/README.md
+-rw-r--r--   0        0        0      538 2020-02-02 00:00:00.000000 spiceai-0.2.2/pyproject.toml
+-rw-r--r--   0        0        0     6361 2020-02-02 00:00:00.000000 spiceai-0.2.2/PKG-INFO
```

### Comparing `spiceai-0.2.1/.github/workflows/ruff.yml` & `spiceai-0.2.2/.github/workflows/ruff.yml`

 * *Files identical despite different names*

### Comparing `spiceai-0.2.1/scripts/run.py` & `spiceai-0.2.2/scripts/run.py`

 * *Files identical despite different names*

### Comparing `spiceai-0.2.1/spice/errors.py` & `spiceai-0.2.2/spice/errors.py`

 * *Files identical despite different names*

### Comparing `spiceai-0.2.1/spice/models.py` & `spiceai-0.2.2/spice/models.py`

 * *Files identical despite different names*

### Comparing `spiceai-0.2.1/spice/providers.py` & `spiceai-0.2.2/spice/providers.py`

 * *Files identical despite different names*

### Comparing `spiceai-0.2.1/spice/spice.py` & `spiceai-0.2.2/spice/spice.py`

 * *Files 6% similar despite different names*

```diff
@@ -654,52 +654,101 @@
             raise
 
         if name is None:
             name = file_path.name.rsplit(".", 1)[0]
 
         self.store_prompt(prompt, name)
 
+    def _load_toml_dict(self, toml_dict: Dict[str, Any], name: str):
+        for k, v in toml_dict.items():
+            new_name = f"{name}.{k}"
+            if isinstance(v, str):
+                self.store_prompt(v, new_name)
+            elif isinstance(v, Dict):
+                self._load_toml_dict(v, new_name)
+            else:
+                raise ValueError("Invalid prompt TOML: TOML must only contain strings for prompts.")
+
+    def load_toml_prompts(self, file_path: Path | str, name: Optional[str] = None):
+        """
+        Loads prompts from a given toml file. The names of the prompts in the file will be prefixed by `{name}.`, so a file named prompts.toml containing `prompt1 = "Hi!"` would load the prompt as `prompts.prompt1`.
+        Only available for Python 3.11 (when tomllib was introduced)!
+
+        Args:
+            file_path: The path to the file. Must be a text encoded file containing valid TOML.
+
+            name: The name of the prompt. If no name is given, the name will be the file name without the extension; i.e., the name of /path/to/prompt.toml will be `prompt`.
+            If the name collides with the name of a previously loaded prompt, the previous prompt will be overwritten.
+        """
+
+        import tomllib
+
+        file_path = Path(file_path).expanduser().resolve()
+
+        try:
+            toml = file_path.read_text()
+        except (UnicodeDecodeError, FileNotFoundError):
+            raise
+
+        if name is None:
+            name = file_path.name.rsplit(".", 1)[0]
+
+        self._load_toml_dict(tomllib.loads(toml), name)
+
     def load_dir(self, dir_path: Path | str):
         """
-        Loads a prompts from a given directory. Will recursively load all text encoded .txt files in the directory and its subdirectories.
-        Prompt names will be the filenames with their .txt extension stripped with a `.` separating each subdirectory. For example, this directory would have these prompt names:
+        Loads a prompts from a given directory. Will recursively load all text encoded .txt (and .toml if using Python 3.11) files in the directory and its subdirectories.
+        Prompt names will be the filenames with their extension stripped with a `.` separating each subdirectory. For example, this directory would have these prompt names:
         If any name collides with the name of a previously loaded prompt, the previous prompt will be overwritten.
 
         ```
         dir_path/
             sub_dir/
-                prompt_1.txt        - sub_dir.prompt_1
+                prompt_1.toml        - sub_dir.prompt_1.{TOML prompt names}
                 not_a_prompt.jpg
             prompt_2.txt            - prompt_2
             another_prompt.txt      - another_prompt.txt
         ```
 
         Args:
             dir_path: The path to the directory.
         """
 
+        try:
+            import tomllib
+
+            use_toml = True
+        except ImportError:
+            use_toml = False
+
         dir_path = Path(dir_path).expanduser().resolve()
         if not dir_path.exists():
             raise FileNotFoundError()
 
-        file_paths = glob.glob(f"{dir_path}/**/*.txt", recursive=True)
+        file_paths = glob.glob(f"{dir_path}/**/*.txt", recursive=True) + glob.glob(
+            f"{dir_path}/**/*.toml", recursive=True
+        )
         for file_path in file_paths:
             file_path = Path(file_path)
 
             try:
                 prompt = file_path.read_text()
             except (UnicodeDecodeError, FileNotFoundError):
                 continue
 
             rel_path = file_path.relative_to(dir_path)
             name = ".".join(
                 (part if i != len(rel_path.parts) - 1 else part.rsplit(".", 1)[0])
                 for i, part in enumerate(rel_path.parts)
             )
-            self.store_prompt(prompt, name)
+            if str(file_path).endswith(".toml"):
+                if use_toml:
+                    self._load_toml_dict(tomllib.loads(prompt), name)  # pyright: ignore[reportPossiblyUnboundVariable]
+            elif str(file_path).endswith(".txt"):
+                self.store_prompt(prompt, name)
 
     def load_url(self, url: str):
         """
         Loads a prompt from the given url. Will send a GET request to the url and expects a response with the following schema:
         ```
         {
             "prompts": [
```

### Comparing `spiceai-0.2.1/spice/spice_message.py` & `spiceai-0.2.2/spice/spice_message.py`

 * *Files identical despite different names*

### Comparing `spiceai-0.2.1/spice/utils.py` & `spiceai-0.2.2/spice/utils.py`

 * *Files identical despite different names*

### Comparing `spiceai-0.2.1/spice/wrapped_clients.py` & `spiceai-0.2.2/spice/wrapped_clients.py`

 * *Files identical despite different names*

### Comparing `spiceai-0.2.1/LICENSE` & `spiceai-0.2.2/LICENSE`

 * *Files identical despite different names*

### Comparing `spiceai-0.2.1/README.md` & `spiceai-0.2.2/README.md`

 * *Files identical despite different names*

### Comparing `spiceai-0.2.1/pyproject.toml` & `spiceai-0.2.2/pyproject.toml`

 * *Files 2% similar despite different names*

```diff
@@ -8,15 +8,15 @@
 [tool.hatch]
 
 [tool.hatch.build.targets.wheel]
 packages=["spice"]
 
 [project]
 name = "spiceai"
-version = "0.2.1"
+version = "0.2.2"
 license = {text = "Apache-2.0"}
 description = "A Python library for building AI-powered applications."
 readme = "README.md"
 dependencies = [
     "python-dotenv",
     "openai",
     "anthropic",
```

### Comparing `spiceai-0.2.1/PKG-INFO` & `spiceai-0.2.2/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.3
 Name: spiceai
-Version: 0.2.1
+Version: 0.2.2
 Summary: A Python library for building AI-powered applications.
 License: Apache-2.0
 License-File: LICENSE
 Requires-Dist: anthropic
 Requires-Dist: httpx
 Requires-Dist: jinja2
 Requires-Dist: openai
```

